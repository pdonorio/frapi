<div class="container-fluid">
 <div class="row">

  <!-- this is used to get the CSS3 blur -->
  <div class="ib-container" id="ib-container">

    <!-- STEP LIST -->
    <div class="col-md-3 col-xs-3">

      <div class="list-group">
        <!-- HEADER -->
        <a class="list-group-item peach" ng-if="id == 'new'">
          <h4 class='dtext'> Inserimento </h4>
        </a>
        <a class="list-group-item disabled" ng-if="id != 'new'">
          <h4 class='dtext'> Modifica </h4>
          <b>Record</b> <span class="label label-info"> {{id | limitTo:8}} </span>
        </a>

        <form editable-form name="stepsForm" onaftersave="saveSteps()">
          <!-- STEPS -->
          <a href class="list-group-item" ng-repeat='step in steps' ng-click="setStep(step.step)"
            ng-class="{'orange': step.step == current}">
                <!-- badge -->
                <span class="badge" ng-hide="stepsForm.$visible"> {{step.step}} </span>
                <!-- step edit -->
                <span editable-number="step.step" e-min="1" ng-show="stepsForm.$visible" e-required>
                  Step
                  {{step.step}}
                </span>
                <!-- editable label -->
                <span editable-text="step.name" e-form="stepsForm">
                  {{ (step.name | ucFirst) || 'empty'}}
                </span>
                <!-- remove button -->
                <button ng-show="stepsForm.$visible" class="btn btn-danger" ng-click="removeStep($index)">
                  <i class="fa fa-trash-o"></i>
                </button>
          </a>

          <!-- UPLOADER -->
          <a href="" class="list-group-item"
            ng-click="setStep(steps.length +1)" ng-class="{'orange': steps.length+1 == current}">
                <span class="badge">{{steps.length+1}}</span> Upload
          </a>

          <!-- buttons to submit / cancel form -->
          <span ng-show="stepsForm.$visible">
            <br>
            <button type='button' class="btn btn-default" ng-click="addStep()" ng-disabled="stepsForm.$waiting">
              <i class="fa fa-plus"></i>
            </button>
            <button type="submit" class="btn btn-success" ng-disabled="stepsForm.$waiting"
              ng-click='edit.switch = false;'>
              <i class="fa fa-floppy-o"></i>
            </button>
            <button type="button" class="btn btn-warning" ng-disabled="stepsForm.$waiting"
              ng-click="undoSteps(); edit.switch = false;">
              <i class="fa fa-times"></i>
            </button>
          </span>

        </form>

        <!-- SPACE
        <div class="alert alert-warning" role="alert">
          <i class="fa fa-pencil-square-o fa-2x"></i>
          <i>in corso</i>
        </div>
        -->
      </div>


    </div>

    <!-- MAIN BODY of SUBMISSION -->
    <div class="col-md-9 col-xs-9">

      <div ng-hide='bootData.length > 0'>
        No steps configured yet! <br>
        Please contact administrator.
      </div>

      <div ng-show='bootData.length > 0'>

        <!-- Step before if exists -->
        <submission-step current='current' step='current-1' max='bootData.length'
          template='formTemplate' data='bootData[current-2]'></submission-step>

        <!-- CURRENT step -->
        <submission-step current='current' step='current' max='bootData.length'
          edit='edit' name='stepNames[current-1]'
          template='formTemplate' data='bootData[current-1]'></submission-step>

        <!-- Step after, if exists -->
        <submission-step current='current' step='current+1' max='bootData.length'
          template='formTemplate' data='bootData[current]'></submission-step>

        <!-- Upload - This will be last step, so take double the necessary space-->
        <div class="col-md-8" ng-show="current == steps.length +1 || current == steps.length">
           <article ng-class="{'blur': current == steps.length}" >
            <div class="well">
              <h4 ng-if='current == steps.length'>Successivo:</h4>
              <file-uploader></file-uploader>
            </div>
           </article>
        </div>

    </div>

    </div>

  <!-- BLUR div -->
  </div>
 </div> <!-- row -->
</div>